---
import StarRating from "./StarRating.astro";
import { capitalize } from "@/lib/utils";

const { recipe } = Astro.props;
const { data } = recipe;
---

<div
  class="recipe-card bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow duration-300"
>
  <div class="relative">
    <a href={`/recipes/${data.id}`}>
      <img
        src={data.mainImage || "/placeholder.svg?height=250&width=400"}
        alt={data.title}
        class="w-full h-48 object-cover"
      />
    </a>
  </div>

  <div class="p-4">
    <div class="text-sm uppercase font-medium text-gray-500 mb-1">
      {data.cuisine}
    </div>

    <h2 class="text-xl font-bold mb-2">
      <a
        href={`/recipes/${data.id}`}
        class="text-gray-900 hover:text-red-500 transition-colors duration-300"
      >
        {data.title}
      </a>
    </h2>

    <div class="flex items-center mb-2">
      <StarRating rating={data.rating || 5} />
      <span class="ml-2 text-sm text-gray-600"
        >{data.ratingCount || 4} Ratings</span
      >
    </div>

    <div class="text-sm text-gray-600">
      Cook time: {data.cookingTime} minutes | Portions: {data.portions}
    </div>

    <div class="mt-2 flex flex-wrap gap-2">
      {
        data.categories.map((category: string) => (
          <span class="text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded-full">
            {capitalize(category)}
          </span>
        ))
      }
    </div>
  </div>
</div>
